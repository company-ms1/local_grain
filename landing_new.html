<!doctype html>
<html lang="en">
<head>
  <!-- META -->
  <meta charset="utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Аренда энергии за TRX — RentTRX</title>
  <meta name="description" content="Аренда энергии TRON (TRX) для переводов USDT без комиссий. Мгновенное начисление на адрес плательщика." />
  <meta name="theme-color" content="#0a0c12">

  <!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=103710831', 'ym');

    ym(103710831, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/103710831" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  
  <!-- Analytics как у тебя -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QSLELTPNPT"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','G-QSLELTPNPT');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-N8Z4SMVJ');</script>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N8Z4SMVJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17462758132"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','AW-17462758132');</script>
  <script>
    function gtag_report_conversion(url){var cb=function(){if(typeof url!=='undefined')window.location=url};try{gtag('event','conversion',{send_to:'AW-17462758132/KNmRCJKGiIQbEPSV8oZB',value:1.0,currency:'USD',event_callback:cb});}catch(e){}return false;}
  </script>

  <style>
    :root{
      --bg:#0a0c12; --card:#171b24; --elev:#0f141d;
      --text:#f0f4fb; --muted:#a8b1c2; --line:#2a3242;
      --accent:#6aa1ff; --good:#20d490; --ring:rgba(106,161,255,.4);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(900px 700px at 85% -10%, rgba(106,161,255,.12), transparent 60%), var(--bg);
      color:var(--text);
      font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,"Noto Color Emoji","Apple Color Emoji","Segoe UI Emoji";
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .wrap{max-width:1040px; margin:24px auto 40px; padding:0 16px}
    .top{display:flex; gap:12px; align-items:center; justify-content:space-between; margin-bottom:8px; flex-wrap:wrap}
    .title{margin:0; font-weight:800; letter-spacing:.2px; font-size:clamp(22px,4vw,36px)}
    .subtitle{margin:6px 0 0; color:var(--muted); font-size:14px}

    .top-right{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .how-btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:10px; border:1px solid var(--line);
      background:linear-gradient(180deg,var(--elev),#101622); color:var(--text);
      font-weight:700; text-decoration:none;
    }
    .how-btn:hover{border-color:var(--accent); box-shadow:0 0 0 5px var(--ring)}

    .flags{display:flex; gap:8px; align-items:center}
    .flag-btn{display:inline-flex; align-items:center; justify-content:center; width:40px; height:36px; border-radius:10px; border:1px solid var(--line);
      background:linear-gradient(180deg,var(--elev),#101622); cursor:pointer; font-size:20px; transition:.15s transform,.15s border-color,.15s box-shadow; color:var(--text)}
    .flag-btn[aria-pressed="true"]{border-color:var(--accent); box-shadow:0 0 0 5px var(--ring)}

    .buybar{display:flex; gap:10px; align-items:center; justify-content:space-between;
      background:linear-gradient(90deg,var(--accent),#2b89ff); color:#071635; padding:12px 14px; border-radius:12px; margin:12px 0 14px;
      box-shadow:0 6px 20px rgba(79,140,255,.25); flex-wrap:wrap; font-weight:700}

    .badges{display:flex; flex-wrap:wrap; gap:8px; margin:12px 0 8px}
    .badge{font-size:13px; color:var(--text); background:#0f1b2e; border:1px solid #345; padding:6px 10px; border-radius:999px}

    .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 12; background:var(--card); border:1px solid var(--line); border-radius:16px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.2)}
    @media (min-width:860px){ .span6{grid-column:span 6} }

    label{display:block; font-weight:700; margin:4px 0 8px}
    input[type="number"]{
      width:100%; padding:12px 14px; background:var(--elev); color:var(--text);
      border:1px solid var(--line); border-radius:12px; outline:0; transition:.18s border-color,.18s box-shadow
    }
    input:focus{border-color:var(--accent); box-shadow:0 0 0 6px var(--ring)}
    input[readonly]{opacity:.85; cursor:not-allowed}

    .row{display:grid; grid-template-columns:1fr; gap:12px}
    @media (min-width:560px){ .row{grid-template-columns:1fr 1fr} }

    .chips{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .chip{display:inline-flex; align-items:center; justify-content:center; padding:9px 14px; border-radius:999px; border:1px solid var(--line);
      background:linear-gradient(180deg,var(--elev),#101622); color:var(--text); cursor:pointer; font-weight:800; user-select:none; transition:.15s}
    .chip:hover{border-color:var(--accent)} .chip.active{border-color:var(--accent); box-shadow:0 0 0 5px var(--ring)}
    .chip.static{opacity:.85; cursor:default; pointer-events:none; border-style:dashed;}

    .kpi{display:flex; justify-content:space-between; align-items:baseline; padding:10px 0; border-bottom:1px dashed var(--line)}
    .kpi:last-child{border-bottom:0}
    .kpi .name{color:var(--muted)}
    .kpi .val{font-weight:800}
    .big{font-size:clamp(18px,2.8vw,26px)}
    .save{color:var(--good)}
    .muted{color:var(--muted)}

    .note{margin-top:10px; color:var(--muted); font-size:13px}

    .btn{display:inline-flex; gap:10px; align-items:center; justify-content:center; padding:12px 16px; border-radius:12px; border:1px solid #2b89ff;
      background:linear-gradient(180deg,var(--accent),#2b89ff); color:#071635; font-weight:900; cursor:pointer; transition:.15s}
    .btn:active{transform:scale(.98)}
    .btn-secondary{background:transparent; border-color:var(--line); color:var(--text)}

    /* modal */
    .modal{position:fixed; inset:0; background:rgba(0,0,0,.6); display:none; align-items:center; justify-content:center; padding:16px; z-index:20}
    .modal.open{display:flex}
    .modal .box{max-width:520px; width:100%; background:var(--card); border:1px solid var(--line); border-radius:16px; padding:20px; position:relative}
    .modal .close{position:absolute; right:10px; top:10px; border:1px solid var(--line); background:var(--elev); border-radius:10px; padding:6px 10px; cursor:pointer; color:var(--text)}
    .code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; background:#0d1420; border:1px solid #3a455a; border-radius:12px; padding:10px 12px}
    .warn{background:#201600; border:1px solid #ffd27a; color:#ffd27a; padding:10px 12px; border-radius:12px; margin:10px 0}
    .qr{display:flex; justify-content:center; margin:12px 0}
    .copybtn{margin-left:8px; border:1px solid var(--line); background:transparent; border-radius:10px; padding:6px 10px; color:var(--text); cursor:pointer}

    /* footer */
    .footer{background:linear-gradient(0deg,rgba(255,255,255,0.02),transparent),var(--card); border-top:1px solid var(--line); margin-top:24px}
    .footer .foot-grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr); padding:22px 16px}
    .footer .col{grid-column:span 12}
    @media (min-width:860px){
      .footer .col.span4{grid-column:span 4}
      .footer .col.span3{grid-column:span 3}
      .footer .col.span5{grid-column:span 5}
    }
    .brand{display:flex; align-items:center; gap:10px}
    .brand .dot{width:34px; height:34px; border-radius:50%; background:var(--elev); display:inline-flex; align-items:center; justify-content:center; font-weight:800}
    .brand .name{font-weight:800; letter-spacing:.2px}
    .foot-list{list-style:none; padding:0; margin:10px 0 0; display:grid; gap:8px}
    .foot-list a{color:var(--text); text-decoration:none}
    .foot-list a:hover{color:var(--accent)}
    .badge-muted{display:inline-block; padding:4px 8px; border:1px solid var(--line); border-radius:999px; color:var(--muted); font-size:12px}
    .social{display:flex; gap:10px; margin-top:10px}
    .social a{display:inline-flex; width:34px; height:34px; border-radius:10px; border:1px solid var(--line); align-items:center; justify-content:center; background:var(--elev); text-decoration:none}
    .social a:hover{border-color:var(--accent); box-shadow:0 0 0 5px var(--ring)}
    .foot-bottom{border-top:1px dashed var(--line); padding:12px 16px; display:flex; gap:8px; flex-wrap:wrap; align-items:center; justify-content:space-between}
    .foot-bottom small{color:var(--muted)}
    .foot-links{display:flex; gap:14px; flex-wrap:wrap}
    .foot-item{display:flex; align-items:center; gap:8px}
    .foot-item svg{width:16px; height:16px; opacity:.8}
    .foot-links a{display:inline-flex; align-items:center; gap:6px; text-decoration:none; color:var(--muted)}
    .foot-links a:hover{color:var(--text)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1 class="title" data-i18n="title">Аренда энергии за TRX</h1>
        <p class="subtitle" data-i18n="subtitle">Мгновенное начисление энергии на адрес плательщика. Переводы USDT без комиссий TRX.</p>
      </div>
      <div class="top-right">
        <a class="how-btn" href="how-it-works.html" id="howLink" data-i18n="how_link">Как это работает</a>
        <div class="flags" role="group" aria-label="Language">
          <button class="flag-btn" data-lang="ru" aria-pressed="true"  title="Русский">🇷🇺</button>
          <button class="flag-btn" data-lang="en" aria-pressed="false" title="English">🇬🇧</button>
          <button class="flag-btn" data-lang="zh" aria-pressed="false" title="中文">🇨🇳</button>
        </div>
      </div>
    </div>

    <div class="buybar"><div id="buyInfo">💡 Здесь можно <b>не только рассчитать</b> стоимость энергии TRON, но и <b>купить её прямо сейчас</b> по выгодной цене!</div></div>

    <div class="badges">
      <span class="badge" data-i18n="badge_price">3 TRX = 1 перевод (65 000 энергии)</span>
      <span class="badge" data-i18n="badge_base">База рынка: 13.5 TRX / перевод</span>
    </div>

    <!-- КАЛЬКУЛЯТОР -->
    <div class="grid" style="margin-top:8px">
      <div class="card span6">
        <div class="row" style="margin-top:14px">
          <div>
            <label for="tx" data-i18n="label_tx">Количество транзакций</label>
            <input id="tx" type="number" min="1" step="1" value="1" readonly aria-readonly="true">
            <div class="chips" id="txChips">
              <button type="button" class="chip" data-v="1">1</button>
              <button type="button" class="chip" data-v="2">2</button>
              <button type="button" class="chip" data-v="3">3</button>
              <button type="button" class="chip" data-v="5">5</button>
              <button type="button" class="chip" data-v="7">7</button>
              <button type="button" class="chip" data-v="10">10</button>
            </div>
            <div class="chips" id="calcHints" style="margin-top:6px">
              <span class="chip static" data-i18n="hint_1h">⏱ 1 час аренды</span>
              <span class="chip static" id="chipEnergyHint">⚡ 65 000 энергии/перевод</span>
            </div>
            <p class="note" id="creditNote" data-i18n="credit_note">Энергия будет начислена на адрес, с которого придёт оплата.</p>
          </div>
          <div>
            <label data-i18n="label_wallet">Кошелёк получателя</label>
            <div class="chips" id="usdtState" role="group" aria-label="USDT on wallet?">
              <button type="button" class="chip active" data-v="has"  data-i18n="has_usdt">Есть USDT</button>
              <button type="button" class="chip"        data-v="none" data-i18n="no_usdt">Нет USDT</button>
            </div>
            <div class="note" data-i18n="note_no_usdt">Если на кошельке <b>нет</b> USDT — на 1 перевод нужно ~130 000 энергии.</div>
          </div>
        </div>
      </div>

      <div class="card span6">
        <div class="kpi">
          <span class="name" data-i18n="rent_1h">Срок аренды</span>
          <span class="val" data-i18n="rent_1h_val">1 час</span>
        </div>
        <div class="kpi">
          <span class="name" data-i18n="energy_per">Энергии на 1 перевод</span>
          <span id="k_energyPer" class="val">65 000</span>
        </div>
        <div class="kpi">
          <span class="name" data-i18n="energy_total">Нужно энергии (всего)</span>
          <span id="k_energyTotal" class="val">65 000</span>
        </div>
        <div class="kpi">
          <span class="name" data-i18n="price_per">Цена за 1 перевод</span>
          <span id="k_pp" class="val">3.00 TRX</span>
        </div>

        <!-- Итог: наша цена + зачёркнутая базовая + экономия (TRX и USD) -->
        <div class="kpi">
          <span class="name big save" data-i18n="total_to_pay">Итого к оплате</span>
          <span class="val big">
            <span id="k_total">3.00 TRX</span>
            <span class="muted" style="margin-left:8px"><s id="k_totalBase">13.50 TRX</s></span>
          </span>
        </div>
        <div class="kpi">
          <span class="name save" data-i18n="you_save_trx">Экономия (TRX)</span>
          <span class="val save" id="k_saveTrx">10.50 TRX</span>
        </div>
        <div class="kpi">
          <span class="name save" data-i18n="you_save_usd">Экономия (USD)</span>
          <span class="val save" id="k_saveUsd">—</span>
        </div>

        <div class="note" id="rateInfo" data-i18n="price_note">Цена за 1 перевод указана для аренды на 1 час. Курс TRX обновляется автоматически.</div>

        <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn" id="buyBtn" data-i18n="buy_btn">Купить энергию TRON</button>
          <!-- убрали "Скопировать расчёт" по твоей просьбе -->
        </div>
      </div>
    </div>

    <!-- Инструкция -->
    <div class="card inst" style="margin-top:16px">
      <h3 data-i18n="inst_title">Инструкция (как в Telegram-боте)</h3>
      <p data-i18n="inst_tariffs_title"><b>💰 Тарифы:</b></p>
      <p style="margin-top:-6px" id="instTariffs"></p>
      <p id="instMax"></p>
      <p data-i18n="inst_addr_title">📬 <b>Адрес для перевода:</b></p>
      <div class="codebox">
        <code id="payAddr">TVMN7iPkX4a1dLNq3qv6siGrMsjgNNfqTz</code>
        <button class="copybtn" id="copyBtn" title="Copy" data-i18n="copy">Скопировать</button>
      </div>
      <p id="instHowTitle" style="margin-top:10px"></p>
      <ol class="list" id="instSteps"></ol>
      <p id="instFinal"></p>
    </div>
  </div>

  <!-- Модальное окно оплаты -->
  <div class="modal" id="payModal" role="dialog" aria-modal="true" aria-labelledby="mTitle">
    <div class="box">
      <button class="close" id="mClose" aria-label="Закрыть">✕</button>
      <h3 id="mTitle" style="margin:0 0 6px;font-size:20px;font-weight:800" data-i18n="pay_title">Оплата заказа</h3>
      <p class="subtitle" id="mSub"><span data-i18n="pay_sub">Переведите</span> <b id="mAmount">—</b> <span data-i18n="pay_sub2">на адрес ниже. Укажите точную сумму.</span></p>
      <div class="qr"><img id="mQR" alt="QR для оплаты" width="200" height="200" loading="lazy"></div>
      <div style="display:flex;align-items:center;gap:8px;margin:6px 0">
        <div class="code" id="mAddr" style="flex:1;overflow:auto">—</div>
        <button class="copybtn" id="copyAddr" data-i18n="copy">Скопировать</button>
      </div>
      <div class="warn" data-i18n="warn_text">Внимание! Переведите <b>именно эту сумму</b>. После оплаты энергия отправится на тот <b>кошелёк, с которого пришли TRX</b>.</div>
      <div class="row" style="margin-top:10px">
        <button class="btn" id="paidBtn" data-i18n="paid_btn">Я оплатил</button>
        <button class="btn btn-secondary" id="mClose2" data-i18n="cancel_btn">Отмена</button>
      </div>
      <p class="note" style="margin-top:12px" id="mOrderMeta"></p>
    </div>
  </div>

  <!-- WAIT MODAL -->
  <div class="modal" id="waitModal" role="dialog" aria-modal="true" aria-labelledby="wTitle">
    <div class="box" style="text-align:center">
      <button class="close" id="wClose" aria-label="Закрыть">✕</button>
      <h3 id="wTitle" style="margin:0 0 16px;font-size:20px;font-weight:800" data-i18n="wait_title">Платёж в обработке</h3>
      <svg width="160" height="160" viewBox="0 0 120 120" aria-hidden="true" style="opacity:.9">
        <circle cx="60" cy="60" r="54" fill="#9aa3b2"/>
        <circle cx="60" cy="60" r="44" fill="none" stroke="#fff" stroke-width="8"/>
        <circle cx="60" cy="60" r="34" fill="#9aa3b2"/>
        <path d="M60 30v32h24" fill="none" stroke="#fff" stroke-width="10" stroke-linecap="round"/>
      </svg>
      <p id="waitMsg1" class="subtitle" style="margin:16px 0 6px" data-i18n="wait_line1">Ожидайте пополнения энергии в течение <b>1 минуты</b>.</p>
      <p class="note" id="waitCountdownWrap" style="margin-top:8px;display:none">
        <span data-i18n="wait_left">Осталось</span> <b id="waitCountdown">60</b> <span data-i18n="wait_sec">сек.</span>
      </p>
    </div>
  </div>

  <!-- ЛОГИКА -->
  <script>
  document.addEventListener('DOMContentLoaded', function(){
    const I18N = {
      ru: {
        title:"Аренда энергии за TRX",
        subtitle:"Мгновенное начисление энергии на адрес плательщика. Переводы USDT без комиссий TRX.",
        how_link:"Как это работает",
        buy_info:"💡 Здесь можно <b>не только рассчитать</b> стоимость энергии TRON, но и <b>купить её прямо сейчас</b> по выгодной цене!",
        badge_price:"3 TRX = 1 перевод (65 000 энергии)",
        badge_base:"База рынка: 13.5 TRX / перевод",
        label_tx:"Количество транзакций",
        label_wallet:"Кошелёк получателя",
        has_usdt:"Есть USDT",
        no_usdt:"Нет USDT",
        note_no_usdt:"Если на кошельке <b>нет</b> USDT — на 1 перевод нужно ~130 000 энергии.",
        hint_1h:"⏱ 1 час аренды",
        rent_1h:"Срок аренды",
        rent_1h_val:"1 час",
        energy_per:"Энергии на 1 перевод",
        energy_total:"Нужно энергии (всего)",
        price_per:"Цена за 1 перевод",
        total_to_pay:"Итого к оплате",
        you_save_trx:"Экономия (TRX)",
        you_save_usd:"Экономия (USD)",
        price_note:"Цена за 1 перевод указана для аренды на 1 час. Курс TRX обновляется автоматически.",
        buy_btn:"Купить энергию TRON",
        inst_title:"Инструкция",
        inst_tariffs_title:"💰 <b>Тарифы:</b>",
        inst_tariffs:["3 TRX = 1 бесплатный перевод (активированный кошелёк)","4 TRX = 1 бесплатный перевод (неактивированный кошелёк)"],
        inst_max:"⚡ <b>Переведите TRX на адрес ниже и получите энергию на <i>1 ЧАС</i>!</b> ⚡",
        inst_addr_title:"📬 <b>Адрес для перевода:</b>",
        inst_how_title:"🛠 <i>Инструкция:</i>",
        inst_steps:["💳 Отправьте <b>TRX</b> с того кошелька, на который хотите получить энергию","⏳ Ожидайте зачисления энергии в течение <b>1–2 минут</b>","🎉 Пользуйтесь переводами <b>без комиссии</b> в течение <b>1 часа</b>!"],
        inst_final:"🔥 Не упустите шанс сэкономить свои TRX!",
        copy:"Скопировать", copied:"Скопировано!",
        pay_title:"Оплата заказа", pay_sub:"Переведите", pay_sub2:"на адрес ниже. Укажите точную сумму.",
        warn_text:"Внимание! Переведите <b>именно эту сумму</b>. После оплаты энергия отправится на тот <b>кошелёк, с которого пришли TRX</b>.",
        paid_btn:"Я оплатил", cancel_btn:"Отмена",
        order_meta_prefix:"Заказ",
        credit_note:"Энергия будет начислена на адрес, с которого придёт оплата.",
        wait_title:"Платёж в обработке",
        wait_line1:"Ожидайте пополнения энергии в течение <b>1 минуты</b>.",
        wait_left:"Осталось", wait_sec:"сек."
      },
      en: {
        title:"Rent TRX Energy",
        subtitle:"Instant energy credit to the payer address. USDT transfers with no TRX fees.",
        how_link:"How it works",
        buy_info:"💡 Here you can <b>not only calculate</b> TRON energy cost, but also <b>buy it right now</b> at a great price!",
        badge_price:"3 TRX = 1 transfer (65,000 energy)",
        badge_base:"Market baseline: 13.5 TRX / transfer",
        label_tx:"Number of transfers",
        label_wallet:"Recipient wallet",
        has_usdt:"Has USDT",
        no_usdt:"No USDT",
        note_no_usdt:"If the wallet has <b>no</b> USDT, ~130,000 energy is needed per transfer.",
        hint_1h:"⏱ 1 hour rental",
        rent_1h:"Rental period",
        rent_1h_val:"1 hour",
        energy_per:"Energy per transfer",
        energy_total:"Total energy needed",
        price_per:"Price per transfer",
        total_to_pay:"Total to pay",
        you_save_trx:"You save (TRX)",
        you_save_usd:"You save (USD)",
        price_note:"Price per transfer for a 1-hour rental. TRX price updates automatically.",
        buy_btn:"Buy TRON Energy",
        inst_title:"Guide",
        inst_tariffs_title:"💰 <b>Tariffs:</b>",
        inst_tariffs:["3 TRX = 1 free transfer (activated wallet)","4 TRX = 1 free transfer (non-activated wallet)"],
        inst_max:"⚡ <b>Send TRX to the address below and get energy for <i>1 HOUR</i>!</b> ⚡",
        inst_addr_title:"📬 <b>Transfer address:</b>",
        inst_how_title:"🛠 <i>How it works:</i>",
        inst_steps:["💳 Send <b>TRX</b> from the wallet that should receive the energy","⏳ Wait <b>1–2 minutes</b> for energy to arrive","🎉 Enjoy <b>fee-free</b> transfers for <b>1 hour</b>!"],
        inst_final:"🔥 Don’t miss the chance to save your TRX!",
        copy:"Copy", copied:"Copied!",
        pay_title:"Payment", pay_sub:"Send", pay_sub2:"to the address below. Send the exact amount.",
        warn_text:"Important! Send the <b>exact</b> amount. After payment, energy will be credited to the <b>same wallet you pay from</b>.",
        paid_btn:"I’ve paid", cancel_btn:"Cancel",
        order_meta_prefix:"Order",
        credit_note:"Energy will be credited to the address you pay from.",
        wait_title:"Payment is processing",
        wait_line1:"Please wait up to <b>1 minute</b> for energy to arrive.",
        wait_left:"Left", wait_sec:"sec"
      },
      zh: {
        title:"租用 TRX 能量",
        subtitle:"能量立即发放到付款地址。USDT 转账几乎无 TRX 手续费。",
        how_link:"它是如何工作的",
        buy_info:"💡 在这里您<b>不仅可以计算</b> TRON 能量价格，还能<b>立刻购买</b>！",
        badge_price:"3 TRX = 1 次转账（65,000 能量）",
        badge_base:"市场基准：13.5 TRX / 次",
        label_tx:"转账次数",
        label_wallet:"接收钱包",
        has_usdt:"有 USDT",
        no_usdt:"没有 USDT",
        note_no_usdt:"若钱包<b>没有</b>USDT，每次约需 130,000 能量。",
        hint_1h:"⏱ 租期 1 小时",
        rent_1h:"租期",
        rent_1h_val:"1 小时",
        energy_per:"每次所需能量",
        energy_total:"总共所需能量",
        price_per:"单次价格",
        total_to_pay:"应付总额",
        you_save_trx:"节省 (TRX)",
        you_save_usd:"节省 (USD)",
        price_note:"单次价格按 1 小时租期计算。TRX 价格自动更新。",
        buy_btn:"购买 TRON 能量",
        inst_title:"使用说明",
        inst_tariffs_title:"💰 <b>资费：</b>",
        inst_tariffs:["3 TRX = 1 次免费转账（已激活）","4 TRX = 1 次免费转账（未激活）"],
        inst_max:"⚡ <b>向下方地址转入 TRX，即可获得 <i>1 小时</i> 能量！</b> ⚡",
        inst_addr_title:"📬 <b>转账地址：</b>",
        inst_how_title:"🛠 <i>操作步骤：</i>",
        inst_steps:["💳 使用需接收能量的钱包发送 <b>TRX</b>","⏳ 等待 <b>1–2 分钟</b>","🎉 在 <b>1 小时</b> 内享受<b>免手续费</b>转账！"],
        inst_final:"🔥 把握机会，节省 TRX！",
        copy:"复制地址", copied:"已复制！",
        pay_title:"支付", pay_sub:"请转账", pay_sub2:"至下方地址。务必发送精确金额。",
        warn_text:"重要！请发送<b>精确</b>金额。支付后能量将发放到<b>您付款所用的钱包地址</b>。",
        paid_btn:"我已支付", cancel_btn:"取消",
        order_meta_prefix:"订单",
        credit_note:"能量将发放到您付款所用的钱包地址。",
        wait_title:"支付处理中",
        wait_line1:"请等待最多<b>1 分钟</b>完成入账。",
        wait_left:"剩余", wait_sec:"秒"
      }
    };

    const $ = id => document.getElementById(id);
    let lang = localStorage.getItem('energy_lang') || 'en';

    // === цены/энергия ===
    const PAY_TO_ADDRESS="TVMN7iPkX4a1dLNq3qv6siGrMsjgNNfqTz"; // замени на свой при необходимости
    const PRICE_PER_TX={has:3.0, none:4.0};
    const PRICE_BASE   = 13.5; // базовая «рыночная» цена за перевод
    const HOUR_MULT=1.0;
    const ENERGY_PER_TX={has:65000, none:130000};

    // курс TRX для USD экономии
    let TRX_USD = null;

    // Элементы
    const k_energyPer=$('k_energyPer'),k_energyTot=$('k_energyTotal'),
          k_pricePer=$('k_pp'),k_total=$('k_total'),k_totalBase=$('k_totalBase'),
          k_saveTrx=$('k_saveTrx'),k_saveUsd=$('k_saveUsd'),
          waitModal=$('waitModal'), waitCountdownWrap=$('waitCountdownWrap'),
          waitCountdown=$('waitCountdown'), wClose=$('wClose');

    const mAmount=$('mAmount'), mAddr=$('mAddr'), mQR=$('mQR'), mOrderMeta=$('mOrderMeta'),
          modal=$('payModal');

    const st={tx:1, usdt:'has'};

    function nf(num, d=2){
      const loc = lang==='en'?'en-US':lang==='zh'?'zh-CN':'ru-RU';
      return new Intl.NumberFormat(loc,{minimumFractionDigits:d,maximumFractionDigits:d}).format(num);
    }
    function ni(num){
      const loc = lang==='en'?'en-US':lang==='zh'?'zh-CN':'ru-RU';
      return new Intl.NumberFormat(loc).format(num);
    }

    function compute(){
      const ePer = ENERGY_PER_TX[st.usdt];
      const pp   = PRICE_PER_TX[st.usdt]*HOUR_MULT;       // наша цена/перевод
      const base = PRICE_BASE;                             // базовая цена/перевод

      const totalOur  = st.tx * pp;
      const totalBase = st.tx * base;
      const saveTRX   = Math.max(totalBase - totalOur, 0);
      const saveUSD   = (TRX_USD ? saveTRX * TRX_USD : null);

      // UI
      k_energyPer.textContent = ni(ePer);
      k_energyTot.textContent = ni(st.tx * ePer);
      k_pricePer.textContent  = `${nf(pp,2)} TRX`;
      k_total.textContent     = `${nf(totalOur,2)} TRX`;
      k_totalBase.textContent = `${nf(totalBase,2)} TRX`;
      k_saveTrx.textContent   = `${nf(saveTRX,2)} TRX`;
      k_saveUsd.textContent   = (saveUSD!=null) ? `$${nf(saveUSD,2)}` : '—';

      // Хинт под чипсами
      const chipHint = $('chipEnergyHint');
      if (chipHint){
        chipHint.textContent = `⚡ ${ni(ePer)} ${lang==='en'?'energy/transfer':(lang==='zh'?'能量/次':'энергии/перевод')}`;
      }
    }

    // i18n
    function t(key){ return (I18N[lang] && I18N[lang][key]) || key; }
    function applyText(){
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key=el.getAttribute('data-i18n');
        if (I18N[lang] && I18N[lang][key]) el.innerHTML = I18N[lang][key];
      });
      // тарифы/шаги
      const tset = I18N[lang];
      const instTariffs = document.getElementById('instTariffs'); if (instTariffs) instTariffs.innerHTML = (tset.inst_tariffs[0]||'') + '<br>' + (tset.inst_tariffs[1]||'');
      const instMax = document.getElementById('instMax'); if (instMax) instMax.innerHTML = tset.inst_max;
      const instHowTitle = document.getElementById('instHowTitle'); if (instHowTitle) instHowTitle.innerHTML = tset.inst_how_title;
      const instFinal = document.getElementById('instFinal'); if (instFinal) instFinal.innerHTML = tset.inst_final;
      const ol = document.getElementById('instSteps'); if(ol){ ol.innerHTML=''; tset.inst_steps.forEach(s=>{ const li=document.createElement('li'); li.innerHTML=s; ol.appendChild(li); }); }
      document.getElementById('buyInfo').innerHTML = tset.buy_info;
      document.documentElement.lang = lang;
      // кнопка "Как это работает"
      const how = document.getElementById('howLink'); if (how) how.textContent = t('how_link');
      compute();
    }
    function setActiveFlag(){ document.querySelectorAll('.flag-btn').forEach(b=> b.setAttribute('aria-pressed', b.dataset.lang===lang ? 'true' : 'false')); }

    // бинанс: курс TRX
    async function fetchTrxRate(){
      try{
        const res = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=TRXUSDT', { cache:'no-store' });
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();
        if (data && data.price){
          TRX_USD = Number(data.price);
          compute();
        }
      }catch(e){
        // тихо игнорим, просто нет USD экономии
      }
    }

    // Чипы
    function syncChips(groupSel,value){document.querySelectorAll(groupSel+' .chip').forEach(c=>c.classList.toggle('active', c.dataset.v===String(value)))}
    document.getElementById('txChips').addEventListener('click',e=>{
      const b=e.target.closest('.chip'); if(!b) return;
      $('tx').value=b.dataset.v; st.tx=+b.dataset.v; compute(); syncChips('#txChips',b.dataset.v);
    });
    document.getElementById('usdtState').addEventListener('click',e=>{
      const b=e.target.closest('.chip'); if(!b) return;
      st.usdt=b.dataset.v; syncChips('#usdtState',b.dataset.v); compute();
    });

    // Оплата модалка
    function openModal(){
      const ePer=ENERGY_PER_TX[st.usdt], totalTRX=st.tx*(PRICE_PER_TX[st.usdt]*HOUR_MULT);
      mAmount.textContent=`${nf(totalTRX,2)} TRX`; mAddr.textContent=PAY_TO_ADDRESS;
      const memo = encodeURIComponent(`TRON ENERGY | tx:${st.tx} | dur:1h | e/tx:${ePer}`);
      const uri = `tron:${PAY_TO_ADDRESS}?amount=${(totalTRX).toFixed(6)}&memo=${memo}`;
      mQR.src=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(uri)}`;
      mOrderMeta.textContent = `${t('order_meta_prefix')}: ${st.tx} · 1h · ${st.usdt==='has'?t('has_usdt'):t('no_usdt')}`;
      modal.classList.add('open');
    }
    function closeModal(){ modal.classList.remove('open'); }

    $('buyBtn').addEventListener('click', openModal);
    $('mClose').addEventListener('click', closeModal);
    $('mClose2').addEventListener('click', closeModal);
    $('copyAddr').addEventListener('click',async()=>{
      try{await navigator.clipboard.writeText(PAY_TO_ADDRESS);$('copyAddr').textContent=t('copied');setTimeout(()=>$('copyAddr').textContent=t('copy'),1200);}catch(_){}
    });

    // Копирование адреса в инструкции + конверсия
    document.addEventListener('click',async(e)=>{
      if(e.target && e.target.id==='copyBtn'){
        const addr=$('payAddr').textContent.trim();
        try{ await navigator.clipboard.writeText(addr); e.target.textContent=t('copied'); setTimeout(()=>e.target.textContent=t('copy'),1400);}
        catch(_){} finally{ try{gtag_report_conversion()}catch(_){} }
      }
    });

    // WAIT POPUP (автозакрытие)
    let waitTimer=null;
    function openWait(seconds=60){
      waitCountdownWrap.style.display='block';
      let left=seconds; waitCountdown.textContent=left;
      waitModal.classList.add('open');
      clearInterval(waitTimer);
      waitTimer = setInterval(()=>{
        left -= 1;
        if (left<=0){
          clearInterval(waitTimer);
          closeWait();
        }else{
          waitCountdown.textContent=left;
        }
      },1000);
    }
    function closeWait(){
      clearInterval(waitTimer);
      waitModal.classList.remove('open');
    }
    $('wClose').addEventListener('click', closeWait);

    // Нажал "Я оплатил" → закрываем реквизиты и открываем ожидание с таймером
    $('paidBtn').addEventListener('click',()=>{
      try{ gtag_report_conversion?.(); }catch(_){}
      closeModal();
      openWait(60);
    });

    // Язык
    document.addEventListener('click', (e)=>{
      const b=e.target.closest('.flag-btn'); if(!b) return;
      lang=b.dataset.lang; localStorage.setItem('energy_lang',lang); setActiveFlag(); applyText(); compute();
    });

    // init
    setActiveFlag(); applyText(); compute(); syncChips('#txChips','1'); syncChips('#usdtState','has');
    fetchTrxRate(); // курс для USD экономии
    // можно периодически обновлять курс
    setInterval(fetchTrxRate, 60_000);
  });
  </script>

  <!-- FOOTER как у тебя -->
  <footer class="footer" role="contentinfo">
    <div class="wrap foot-grid">
      <div class="col span4">
        <div class="brand"><span class="dot">⚡</span><div><div class="name">RentTRX</div><div class="badge-muted">TRX Energy · Zero-fee transfers</div></div></div>
        <p class="subtitle" style="margin-top:10px">Buy TRX Energy for <b>3 TRX</b> and send USDT with <b>no fees</b> for 1 hour. Instant activation.</p>
        <div class="social" aria-label="Social links">
          <a href="https://t.me/saving_trx_bot" target="_blank" rel="noopener" title="Telegram" aria-label="Telegram">💬</a>
          <a href="https://t.me/trx2_9_support_bot" target="_blank" rel="noopener" title="Support" aria-label="Support">🛟</a>
        </div>
      </div>
      <div class="col span3">
        <h4 style="margin:0 0 8px">Contacts</h4>
        <ul class="foot-list">
          <li>Telegram: <a href="https://t.me/saving_trx_bot" target="_blank" rel="noopener">@saving_trx_bot</a></li>
          <li>Support: <a href="https://t.me/trx2_9_support_bot" target="_blank" rel="noopener">@trx2_9_support_bot</a></li>
          <li>Website: <a href="https://renttrx.vercel.app" target="_blank" rel="noopener">renttrx.vercel.app</a></li>
        </ul>
      </div>
      <div class="col span3">
        <h4 style="margin:0 0 8px">Quick links</h4>
        <ul class="foot-list">
          <li><a href="#top">Calculator</a></li>
          <li><a href="how-it-works.html">How it works</a></li>
          <li><a href="#instTariffs">Tariffs</a></li>
          <li><a href="#" onclick="window.scrollTo({top:0,behavior:'smooth'})">Back to top ↑</a></li>
        </ul>
      </div>
      <div class="col span5">
        <h4 style="margin:0 0 8px">Legal</h4>
        <p class="subtitle" style="margin:8px 0">RentTRX is an energy rental service for the TRON network. We do not custody user funds and are not affiliated with TRON Foundation. Usage of blockchain networks involves risk.</p>
        <ul class="foot-list">
          <li><a class="foot-item" href="/terms.html"><svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M6 2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8 1.5V8h4.5"/></svg><span>Terms of Service</span></a></li>
          <li><a class="foot-item" href="/privacy.html"><svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2l8 4v6c0 5-3.5 9.7-8 10-4.5-.3-8-5-8-10V6l8-4z"/></svg><span>Privacy Policy</span></a></li>
          <li><a class="foot-item" href="/refund.html"><svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 6V3l-4 4l4 4V8c2.8 0 5 2.2 5 5c0 2.2-1.4 4.1-3.4 4.7l-.6 2C16.7 19 19 16.3 19 13c0-3.9-3.1-7-7-7z"/></svg><span>Refund Policy</span></a></li>
        </ul>
      </div>
    </div>
    <div class="foot-bottom">
      <small>© <span id="y"></span> RentTRX. All rights reserved.</small>
      <div class="foot-links" aria-label="Footer links">
        <a href="/terms.html" aria-label="Terms"><svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M6 2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8 1.5V8h4.5"/></svg><span>Terms</span></a>
        <a href="/privacy.html" aria-label="Privacy"><svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2l8 4v6c0 5-3.5 9.7-8 10-4.5-.3-8-5-8-10V6l8-4z"/></svg><span>Privacy</span></a>
        <a href="/refund.html" aria-label="Refunds"><svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 6V3l-4 4l4 4V8c2.8 0 5 2.2 5 5c0 2.2-1.4 4.1-3.4 4.7l-.6 2C16.7 19 19 16.3 19 13c0-3.9-3.1-7-7-7z"/></svg><span>Refunds</span></a>
      </div>
    </div>
  </footer>
  <script>(function(){try{document.getElementById('y').textContent=new Date().getFullYear()}catch(_){}})();</script>
</body>
</html>
